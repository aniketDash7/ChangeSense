<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ChangeSense - Building Damage Detection</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    h1 { color: #2c3e50; }
    form { margin-top: 20px; }
    input[type=file] { margin-bottom: 10px; }
    button { padding: 10px 15px; background: #3498db; color: white; border: none; cursor: pointer; }
    button:hover { background: #2980b9; }
    pre { background: #f4f4f4; padding: 15px; border-radius: 5px; }
    img { max-width: 45%; margin: 10px; border: 2px solid #ddd; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>🏠 ChangeSense: Satellite Building Damage Detector</h1>
  <p>Upload before & after satellite images to analyze structural changes.</p>

  <form action="/" method="post" enctype="multipart/form-data">
    <label>Before Image:</label><br>
    <input type="file" name="before" accept="image/*" required><br><br>

    <label>After Image:</label><br>
    <input type="file" name="after" accept="image/*" required><br><br>

    <button type="submit">Analyze</button>
  </form>

  {% if report %}
    <h2>📊 Analysis Report</h2>
    <pre>{{ report | tojson(indent=2) }}</pre>

    <h2>🖼️ Visualization</h2>
    <div>
      {% if before_img %}
        <img src="{{ url_for('static', filename='results/' + before_img) }}" alt="Before">
      {% endif %}
      {% if after_img %}
        <img src="{{ url_for('static', filename='results/' + after_img) }}" alt="After">
      {% endif %}
    </div>
  {% endif %}
</body>
</html>
